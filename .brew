#!/usr/bin/env bash

set -o nounset
set -o errexit

readonly brew="$(command -v brew)"
[[ -z "${brew}" ]] && echo 'brew command is not installed' && exit -1

${brew} update
if ! ${brew} doctor; then
  echo 'Check doctor messages above'
fi

${brew} upgrade

# Remove outdated versions and broken links
${brew} cleanup
${brew} prune

# Install GNU core utilities
${brew} install coreutils
${brew} install findutils

# Install latest Bash
${brew} install bash
${brew} install bash-completion

# Install other useful binaries
${brew} install git
${brew} install rbenv ruby-build
# ${brew} install carthage
# ${brew} install unrar
# ${brew} install pyenv pyenv-virtualenv

# Remove outdated versions and broken links
${brew} cleanup
${brew} prune
