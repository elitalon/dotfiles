#!/usr/bin/env bash

set -o nounset
set -o errexit

readonly brew="$(command -v brew)"
echo ${brew}
[[ -z "${brew}" ]] && echo 'brew command is not installed' && exit -1

${brew} update
${brew} prune
if ! ${brew} doctor; then
  echo 'Check doctor messages above'
fi
${brew} upgrade

# Install GNU core utilities (those that come with OS X are outdated)
${brew} install coreutils
${brew} install findutils

# Install latest bash
${brew} install bash
${brew} install bash-completion

# Install other useful binaries
${brew} install git
${brew} install unrar

# Remove outdated versions from the cellar
${brew} cleanup
