#!/usr/bin/env bash

set -o nounset
set -o errexit

readonly brew="$(command -v brew)"
[[ -z "${brew}" ]] && echo 'brew command is not installed' && exit -1

${brew} update
${brew} prune
if ! ${brew} doctor; then
  echo 'Check doctor messages above'
fi
${brew} upgrade

# Install GNU core utilities (those that come with OS X are outdated)
${brew} install coreutils
${brew} install findutils

# Install latest Bash
${brew} install bash
${brew} install bash-completion

# Install other useful binaries
${brew} install git
${brew} install unrar
${brew} install rbenv ruby-build
${brew} install pyenv

# Remove outdated versions and broken links from the cellar
${brew} cleanup
${brew} purge
